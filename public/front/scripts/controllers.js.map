{"version":3,"sources":["dashboardControllers.js","bodyControllers.js","registerControllers.js","usersControllers.js","productsControllers.js","returnersControllers.js","orderProductsControllers.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"controllers.js","sourcesContent":["interMap.controller('dashboardController', ['$scope', function ($scope) {\n\n    }]);\n","interMap.controller('bodyController', ['$scope', '$rootScope', '$http', '$state', '$location', 'growl', '$cookies',\n    function ($scope, $rootScope, $http, $state, $location, growl, $cookies) {\n        $rootScope.$state = $state;\n        $scope.admin = false;\n\n        var loginStatus = $cookies.getObject('logged');\n\n        if (angular.isDefined($rootScope.loggedUser) || loginStatus) {\n            if ($rootScope.loggedUser) {\n                $scope.loggedUser = true;\n            } else {\n                $rootScope.permissions = {};\n                $rootScope.permissions.user = loginStatus;\n                $scope.loggedUser = true;\n            }\n        } else {\n            $scope.loggedUser = false;\n            $state.go('login');\n        }\n\n        angular.extend($scope, {\n            logIn: function (loginForm) {\n                $http({\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    url: '/auth',\n                    method: 'POST',\n                    data: {\n                        email: $scope.login.username,\n                        password: $scope.login.password\n                    }\n                }).success(function (response) {\n                    if (response.success) {\n                        $rootScope.permissions = {};\n                        $rootScope.permissions.user = response.data;\n                        $rootScope.loggedUser = true;\n                        $scope.loggedUser = true;\n                        var expireDate = new Date();\n                        expireDate.setDate(expireDate.getDate() + 1);\n                        $cookies.putObject('logged', response.data, {'expires': expireDate});\n                        $state.go('dashboard');\n                        growl.addSuccessMessage('Witaj ' + response.data.name + '!');\n                    } else {\n                        growl.addErrorMessage(response.error);\n                    }\n                });\n            }\n        });\n\n        $scope.logout = function () {\n            $scope.loggedUser = false;\n            $rootScope.loggedUser = false;\n            $cookies.remove('logged');\n            $state.go('login');\n            growl.addErrorMessage('Zostałeś wylogowany ! Zapraszamy ponownie !');\n        }\n\n        $scope.register = function () {\n            $state.go('register');\n        }\n\n        $scope.isActive = function (state, menuState) {\n            var menuActive = state.current.menuActive;\n            return state.current.name == menuState || (angular.isDefined(menuActive) && menuActive == menuState);\n        };\n\n        $scope.adminMenu = function () {\n            $scope.admin = !$scope.admin;\n        }\n    }]);\n\n","interMap.controller('registerController', ['$scope', '$rootScope', '$http', '$state', 'growl', function ($scope, $rootScope, $http, $state, growl) {\n        angular.extend($scope, {\n            registerIn: function (registerForm) {\n                $http({\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    url: '/register',\n                    method: 'POST',\n                    data:  $scope.user\n                }).success(function (response) {\n                    if (response.success) {\n                        $state.go('login');\n                        growl.addSuccessMessage('Rejestracja przebiegła pomyślnie !');\n                    } else {\n                        $scope.error = response.error;\n                    }\n                });\n            }\n        });\n    }]);\n","interMap.controller('usersController', ['$scope', '$rootScope', '$http', '$state', 'growl', function ($scope, $rootScope, $http, $state, growl) {\n\n        var url = '/api/user/';\n\n        $scope.getUsers = function () {\n            return $http.get(url);\n        };\n\n        $scope.removeUser = function (id) {\n            return $http.delete(url + id);\n        }\n\n        $scope.getUsers()\n                .then(function (response) {\n                    if (response.data.success) {\n                        $scope.users = response.data.data;\n                    }\n                });\n\n        $scope.remove = function ($event, id) {\n            $event.stopImmediatePropagation();\n\n            $scope.removeUser(id).\n                    success(function (data) {\n                        if (data.success) {\n                            angular.forEach($scope.users, function (val, key) {\n                                if (val.id == id) {\n                                    $scope.users.splice(key, 1);\n                                }\n                            });\n                            growl.addSuccessMessage('Użytkownik został usunięty !');\n                        } else if (data.error) {\n                            growl.addErrorMessage(data.error);\n                        }\n                    });\n        };\n\n        $scope.editUser = function (id) {\n            var params = {};\n            params.userId = id;\n            $state.go('editUser', params);\n        };\n\n        $scope.addUser = function () {\n            $state.go('newUser');\n        };\n\n    }]);\n\ninterMap.controller('userController', ['$scope', '$stateParams', '$rootScope', '$http', '$state', 'growl', function ($scope, $stateParams, $rootScope, $http, $state, growl) {\n\n        if (angular.isDefined($stateParams.userId)) {\n            $scope.userId = $stateParams.userId;\n        }\n\n        $scope.editMode = false;\n        $scope.user = {};\n        $scope.roles = ['user', 'moderator', 'admin'];\n\n        var url = '/api/user/';\n\n        if (angular.isDefined($scope.userId)) {\n            $scope.editMode = true;\n\n            $http.get(url + $scope.userId)\n                    .then(function (response) {\n                        if (response.data.success) {\n                            $scope.user = response.data.user;\n                        } else {\n                            growl.addErrorMessage(response.data.error);\n                        }\n                    });\n        }\n\n        $scope.cancel = function () {\n            $state.go('users');\n        };\n\n        $scope.saveUser = function (user, editMode) {\n            if (editMode) {\n                return $http.put(url + $scope.user.id, user)\n                        .then(function (response) {\n                            if (response.data.success) {\n                                growl.addSuccessMessage('Użytkownik został zaktualizowany !');\n                                $state.go('users');\n                            } else {\n                                $scope.error = response.data.error;\n                            }\n                        });\n            } else {\n                return $http.post(url, user)\n                        .then(function (response) {\n                            if (response.data.success) {\n                                growl.addSuccessMessage('Użytkownik został dodany !');\n                                $state.go('users');\n                            } else {\n                                $scope.error = response.data.error;\n                            }\n                        });\n            }\n        };\n\n        $scope.passMismatched = function () {\n            if (angular.isDefined($scope.userForm)) {\n                return $scope.userForm.password_confirmation.$error.match;\n            }\n        };\n\n    }]);\n","interMap.controller('productsListController', ['$scope', '$rootScope', '$http', '$state', 'growl', '$uibModal', '$filter',\n    function ($scope, $rootScope, $http, $state, growl, $uibModal, $filter) {\n\n        $scope.sortType = 'created_at';\n        $scope.sortReverse = true;\n\n        var url = '/api/product/';\n\n        $scope.statuses = [\n            'niezrealizowane',\n            'zrealizowane'\n        ];\n\n        $scope.popup = false;\n\n        $scope.dateOptions = {\n            dateDisabled: false,\n            formatYear: 'yy',\n            startingDay: 1,\n        };\n        \n        $rootScope.showButtonBar = false;\n\n\n        $scope.startDate = function () {\n            $scope.popup = true;\n        };\n\n\n        $scope.getProducts = function (sortParam, findParams) {\n            return $http.get(url, {params: {sort: sortParam, find: findParams}});\n        };\n\n        $scope.search = {};\n\n        $scope.searchProducts = function (search) {\n            var find = angular.copy(search);\n            if(angular.isDefined(find.date)) {\n                find.date = $filter('date')(find.date, 'yyyy-MM-dd');\n            }\n            $scope.getProducts($scope.sort, find)\n                    .then(function (response) {\n                        if (response.data.success) {\n                            $scope.products = response.data.data;\n                            $scope.isFind = false;\n                        }\n                    });\n        };\n\n        $scope.clearSearch = function () {\n            delete $scope.search.name;\n            delete $scope.search.person;\n            delete $scope.search.date;\n            $scope.search = {};\n            $scope.getProducts($scope.sort)\n                    .then(function (response) {\n                        if (response.data.success) {\n                            $scope.products = response.data.data;\n                        }\n                    });\n        };\n\n        $scope.$watch('search', function (newValue, oldValue) {\n            $scope.check = false;\n            if (angular.isDefined($scope.search.name)\n                    || angular.isDefined($scope.search.person)\n                    || angular.isDefined($scope.search.date)) {\n                $scope.check = true;\n            } else {\n                $scope.check = false;\n            }\n        }, true);\n\n        $scope.getProducts()\n                .then(function (response) {\n                    if (response.data.success) {\n                        $scope.products = response.data.data;\n                        $scope.sort = 'name';\n                    }\n                });\n\n        $scope.addProduct = function () {\n            var modalInstance = $uibModal.open({\n                templateUrl: '/front/views/products-list/components/modal/product.tpl.html',\n                controller: 'productModalController',\n                resolve: {\n                    product: function () {\n                        return {\n                        };\n                    }\n                }\n            });\n\n            modalInstance.result.then(function (data) {\n                $state.go($state.current, {}, {reload: true});\n                growl.addSuccessMessage('Produkt został dodany pomyślnie !');\n            });\n        };\n\n        $scope.$watch('sort', function (newVal, oldVal) {\n            if (angular.isDefined(oldVal) && angular.isDefined(newVal) && newVal != oldVal) {\n                $scope.getProducts(newVal)\n                        .then(function (response) {\n                            if (response.data.success) {\n                                $scope.products = response.data.data;\n                            }\n                        });\n            }\n        });\n\n        $scope.removeProduct = function (id) {\n            $http.delete(url + id).\n                    success(function (data) {\n                        if (data.success) {\n                            angular.forEach($scope.products, function (val, key) {\n                                if (val.id == id) {\n                                    $scope.products.splice(key, 1);\n                                }\n                            });\n                            growl.addSuccessMessage('Produkt został usunięty !');\n                        } else if (data.error) {\n                            growl.addErrorMessage(data.error);\n                        }\n                    });\n        };\n\n    }]);\n\ninterMap.controller('productPageController', ['$scope', '$stateParams', '$rootScope', '$http', '$state', 'growl', '$uibModal', function ($scope, $stateParams, $rootScope, $http, $state, growl, $uibModal) {\n\n        if (angular.isDefined($stateParams.productId)) {\n            $scope.productId = $stateParams.productId;\n        }\n\n        $scope.statuses = [\n            {\n                id: 1,\n                name: 'niezrealizowane'\n            },\n            {\n                id: 2,\n                name: 'zrealizowane'\n            }\n        ];\n\n        $scope.isLoading = true;\n\n        $scope.product = {};\n\n        var url = '/api/product/';\n\n        if (angular.isDefined($scope.productId)) {\n            $scope.editMode = true;\n\n            $http.get(url + $scope.productId)\n                    .then(function (response) {\n                        if (response.data.success) {\n                            $scope.product = response.data.product;\n                            if ($scope.product.status == 1) {\n                                $scope.product.status = $scope.statuses[0];\n                            } else {\n                                $scope.product.status = $scope.statuses[1];\n                            }\n                        } else {\n                            growl.addErrorMessage(response.data.error);\n                        }\n                    })\n                    .finally(function () {\n                        $scope.isLoading = false;\n                    });\n        }\n\n\n        $scope.cancel = function () {\n            $state.go('productsList');\n        };\n\n        $scope.saveProduct = function () {\n            $scope.isLoading = true;\n            $http.put(url + $scope.product.id, $scope.product).\n                    success(function (data) {\n                        if (data.success) {\n                            $state.go('productsList');\n                            growl.addSuccessMessage('Produkt został zaktualizowany pomyślnie !');\n                        } else {\n                            if (typeof data.error === 'object') {\n                                $scope.formErrors = data.error;\n                            } else {\n                                growl.addErrorMessage('Nie udało się zaktualizować produktu !');\n                            }\n                        }\n                    }).\n                    finally(function () {\n                        $scope.isLoading = false;\n                    });\n        };\n\n    }]);\n\ninterMap.controller('productModalController', ['$scope', '$stateParams', '$rootScope', '$http', '$state', 'growl', 'product', '$uibModalInstance', function ($scope, $stateParams, $rootScope, $http, $state, growl, product, $uibModalInstance) {\n\n        $scope.product = {};\n\n        $scope.statuses = [\n            {\n                id: 1,\n                name: 'niezrealizowane'\n            },\n            {\n                id: 2,\n                name: 'zrealizowane'\n            }\n        ];\n\n        $scope.product.status = $scope.statuses[0];\n\n        if (angular.isDefined(product.name)) {\n            $scope.productId = product.id;\n            $scope.product = product;\n        }\n\n        var url = '/api/product/';\n\n        $scope.save = function () {\n            $scope.isLoading = true;\n            $http.post(url, $scope.product).\n                    success(function (data) {\n                        if (data.success) {\n                            $uibModalInstance.close(data.product);\n                        } else {\n                            if (typeof data.error === 'object') {\n                                $scope.formErrors = data.error;\n                            } else {\n                                growl.addErrorMessage('Nie udało się dodać produktu !');\n                            }\n                        }\n                    }).\n                    finally(function () {\n                        $scope.isLoading = false;\n                    });\n        };\n\n        $scope.cancel = function () {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n    }]);","interMap.controller('returnsListController', ['$scope', '$rootScope', '$http', '$state', 'growl', '$uibModal', '$filter',\n    function ($scope, $rootScope, $http, $state, growl, $uibModal, $filter) {\n\n        $scope.sortType = 'created_at';\n        $scope.sortReverse = true;\n\n        var url = '/api/orders/';\n\n        $scope.statuses = [\n            'niezrealizowane',\n            'zrealizowane'\n        ];\n\n        $scope.popup = false;\n\n        $scope.dateOptions = {\n            dateDisabled: false,\n            formatYear: 'yy',\n            startingDay: 1,\n        };\n\n        $scope.startDate = function () {\n            $scope.popup = true;\n        };\n\n        $scope.getOrders = function (sortParam, findParams) {\n            return $http.get(url, {params: {sort: sortParam, find: findParams}});\n        };\n\n        $scope.search = {};\n\n        $scope.searchOrders = function (search) {\n            var find = angular.copy(search);\n            if (angular.isDefined(find.date)) {\n                find.date = $filter('date')(find.date, 'yyyy-MM-dd');\n            }\n            $scope.getOrders($scope.sort, find)\n                    .then(function (response) {\n                        if (response.data.success) {\n                            $scope.returners = response.data.data;\n                            $scope.isFind = false;\n                        }\n                    });\n        };\n\n        $scope.clearSearch = function () {\n            delete $scope.search.name;\n            delete $scope.search.person;\n            delete $scope.search.date;\n            delete $scope.search.sender;\n            delete $scope.search.number;\n            $scope.search = {};\n            $scope.getOrders($scope.sort)\n                    .then(function (response) {\n                        if (response.data.success) {\n                            $scope.returners = response.data.data;\n                        }\n                    });\n        };\n\n        $scope.$watch('search', function (newValue, oldValue) {\n            $scope.check = false;\n            if (angular.isDefined($scope.search.name)\n                    || angular.isDefined($scope.search.person)\n                    || angular.isDefined($scope.search.sender)\n                    || angular.isDefined($scope.search.number)\n                    || angular.isDefined($scope.search.date)) {\n                $scope.check = true;\n            } else {\n                $scope.check = false;\n            }\n        }, true);\n\n        $scope.getOrders()\n                .then(function (response) {\n                    if (response.data.success) {\n                        $scope.returners = response.data.data;\n                        $scope.sort = 'name';\n                    }\n                });\n\n        $scope.addOrder = function () {\n            var modalInstance = $uibModal.open({\n                templateUrl: '/front/views/returns-list/components/modal/return.tpl.html',\n                controller: 'returnModalController',\n                resolve: {\n                    order: function () {\n                        return {\n                        };\n                    }\n                }\n            });\n\n            modalInstance.result.then(function (data) {\n                $state.go($state.current, {}, {reload: true});\n                growl.addSuccessMessage('Protokół zwrotu został dodany pomyślnie !');\n            });\n        };\n\n        $scope.$watch('sort', function (newVal, oldVal) {\n            if (angular.isDefined(oldVal) && angular.isDefined(newVal) && newVal != oldVal) {\n                $scope.getOrders(newVal)\n                        .then(function (response) {\n                            if (response.data.success) {\n                                $scope.returners = response.data.data;\n                            }\n                        });\n            }\n        });\n\n        $scope.removeOrder = function (id) {\n            $http.delete(url + id).\n                    success(function (data) {\n                        if (data.success) {\n                            angular.forEach($scope.returners, function (val, key) {\n                                if (val.id == id) {\n                                    $scope.returners.splice(key, 1);\n                                }\n                            });\n                            growl.addSuccessMessage('Protokół zwrotu został usunięty !');\n                        } else if (data.error) {\n                            growl.addErrorMessage(data.error);\n                        }\n                    });\n        };\n\n    }]);\n\ninterMap.controller('returnPageController', ['$scope', '$stateParams', '$rootScope', '$http', '$state', 'growl', '$uibModal', function ($scope, $stateParams, $rootScope, $http, $state, growl, $uibModal) {\n\n        if (angular.isDefined($stateParams.returnId)) {\n            $scope.returnId = $stateParams.returnId;\n        }\n\n        $scope.statuses = [\n            {\n                id: 1,\n                name: 'niezrealizowane'\n            },\n            {\n                id: 2,\n                name: 'zrealizowane'\n            }\n        ];\n\n        $scope.isLoading = true;\n\n        $scope.order = {};\n\n        var url = '/api/orders/';\n\n        if (angular.isDefined($scope.returnId)) {\n            $scope.editMode = true;\n\n            $http.get(url + $scope.returnId)\n                    .then(function (response) {\n                        if (response.data.success) {\n                            $scope.order = response.data.order;\n                            if (angular.isDefined($scope.order.date)) {\n                                $scope.order.date = new Date($scope.order.date);\n                            }\n                            if ($scope.order.status == 1) {\n                                $scope.order.status = $scope.statuses[0];\n                            } else {\n                                $scope.order.status = $scope.statuses[1];\n                            }\n                        } else {\n                            growl.addErrorMessage(response.data.error);\n                        }\n                    })\n                    .finally(function () {\n                        $scope.isLoading = false;\n                    });\n        }\n\n\n        $scope.cancel = function () {\n            $state.go('returnsList');\n        };\n\n        $scope.saveOrder = function () {\n            $scope.isLoading = true;\n            $http.put(url + $scope.order.id, $scope.order).\n                    success(function (data) {\n                        if (data.success) {\n                            $state.go('returnsList');\n                            growl.addSuccessMessage('Protokół zwrotu został zaktualizowany pomyślnie !');\n                        } else {\n                            if (typeof data.error === 'object') {\n                                $scope.formErrors = data.error;\n                            } else {\n                                growl.addErrorMessage('Nie udało się zaktualizować protokołu zwrotu !');\n                            }\n                        }\n                    }).\n                    finally(function () {\n                        $scope.isLoading = false;\n                    });\n        };\n\n        $scope.popup = false;\n\n        $scope.dateOptions = {\n            dateDisabled: false,\n            formatYear: 'yy',\n            startingDay: 1,\n        };\n\n        $scope.startDate = function () {\n            $scope.popup = true;\n        };\n\n    }]);\n\ninterMap.controller('returnModalController', ['$scope', '$stateParams', '$rootScope', '$http', '$state', 'growl', 'order', '$uibModalInstance', function ($scope, $stateParams, $rootScope, $http, $state, growl, order, $uibModalInstance) {\n\n        $scope.order = {};\n\n        if (angular.isDefined(order.name)) {\n            $scope.orderId = order.id;\n            $scope.order = order;\n        }\n\n        var url = '/api/orders/';\n\n        $scope.save = function () {\n            $scope.isLoading = true;\n            $http.post(url, $scope.order).\n                    success(function (data) {\n                        if (data.success) {\n                            $uibModalInstance.close(data.order);\n                        } else {\n                            if (typeof data.error === 'object') {\n                                $scope.formErrors = data.error;\n                            } else {\n                                growl.addErrorMessage('Nie udało się dodać protokołu zwrotu !');\n                            }\n                        }\n                    }).\n                    finally(function () {\n                        $scope.isLoading = false;\n                    });\n        };\n\n        $scope.cancel = function () {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n    }]);","interMap.controller('orderProductsListController', ['$scope', '$rootScope', '$http', '$state', 'growl', '$uibModal', '$filter', '$stateParams',\n    function ($scope, $rootScope, $http, $state, growl, $uibModal, $filter, $stateParams) {\n\n        $scope.sortType = 'created_at';\n        $scope.sortReverse = true;\n\n        if (angular.isDefined($stateParams.returnId)) {\n            $scope.orderId = $stateParams.returnId;\n        }\n\n        var url = '/api/order-products/';\n\n        $scope.getProducts = function (orderId, sortParam, findParams) {\n            return $http.get(url, {params: {sort: sortParam, find: findParams, order_id: orderId}});\n        };\n\n        $scope.getProducts($scope.orderId)\n                .then(function (response) {\n                    if (response.data.success) {\n                        $scope.products = response.data.data;\n                        $scope.sort = 'name';\n                    }\n                });\n\n        $scope.addProduct = function () {\n            var modalInstance = $uibModal.open({\n                templateUrl: '/front/views/returns-list/components/modal/product.tpl.html',\n                controller: 'orderProductModalController',\n                resolve: {\n                    product: function () {\n                        return {\n                            order_id: $scope.orderId\n                        };\n                    }\n                }\n            });\n\n            modalInstance.result.then(function (data) {\n                $state.go($state.current, {}, {reload: true});\n                growl.addSuccessMessage('Produkt został dodany pomyślnie !');\n            });\n        };\n\n        $scope.removeProduct = function (id) {\n            $http.delete(url + id).\n                    success(function (data) {\n                        if (data.success) {\n                            angular.forEach($scope.products, function (val, key) {\n                                if (val.id == id) {\n                                    $scope.products.splice(key, 1);\n                                }\n                            });\n                            growl.addSuccessMessage('Produkt został usunięty !');\n                        } else if (data.error) {\n                            growl.addErrorMessage(data.error);\n                        }\n                    });\n        };\n        \n        $scope.cancel = function () {\n            $state.go('returnsList');\n        };\n\n    }]);\n\ninterMap.controller('orderProductPageController', ['$scope', '$stateParams', '$rootScope', '$http', '$state', 'growl', '$uibModal', function ($scope, $stateParams, $rootScope, $http, $state, growl, $uibModal) {\n\n        if (angular.isDefined($stateParams.productId)) {\n            $scope.productId = $stateParams.productId;\n        }\n\n        $scope.statuses = ['OK', 'S', 'ZN'];\n\n        $scope.isLoading = true;\n\n        $scope.product = {};\n\n        var url = '/api/order-products/';\n\n        if (angular.isDefined($scope.productId)) {\n            $scope.editMode = true;\n\n            $http.get(url + $scope.productId)\n                    .then(function (response) {\n                        if (response.data.success) {\n                            $scope.product = response.data.product;\n                        } else {\n                            growl.addErrorMessage(response.data.error);\n                        }\n                    })\n                    .finally(function () {\n                        $scope.isLoading = false;\n                    });\n        }\n\n\n        $scope.cancel = function () {\n            $state.go('orderProductsList',{returnId: $scope.product.order_id});\n        };\n\n        $scope.saveProduct = function () {\n            $scope.isLoading = true;\n            $http.put(url + $scope.product.id, $scope.product).\n                    success(function (data) {\n                        if (data.success) {\n                            $state.go('orderProductsList',{returnId: $scope.product.order_id});\n                            growl.addSuccessMessage('Produkt został zaktualizowany pomyślnie !');\n                        } else {\n                            if (typeof data.error === 'object') {\n                                $scope.formErrors = data.error;\n                            } else {\n                                growl.addErrorMessage('Nie udało się zaktualizować produktu!');\n                            }\n                        }\n                    }).\n                    finally(function () {\n                        $scope.isLoading = false;\n                    });\n        };\n\n    }]);\n\ninterMap.controller('orderProductModalController', ['$scope', '$stateParams', '$rootScope', '$http', '$state', 'growl', 'product', '$uibModalInstance', function ($scope, $stateParams, $rootScope, $http, $state, growl, product, $uibModalInstance) {\n\n        $scope.product = {};\n\n        $scope.product = product;\n\n        var url = '/api/order-products/';\n\n        $scope.statuses = ['OK', 'S', 'ZN'];\n\n        $scope.save = function () {\n            $scope.isLoading = true;\n            $http.post(url, $scope.product).\n                    success(function (data) {\n                        if (data.success) {\n                            $uibModalInstance.close(data.product);\n                        } else {\n                            if (typeof data.error === 'object') {\n                                $scope.formErrors = data.error;\n                            } else {\n                                growl.addErrorMessage('Nie udało się dodać produktu!');\n                            }\n                        }\n                    }).\n                    finally(function () {\n                        $scope.isLoading = false;\n                    });\n        };\n\n        $scope.cancel = function () {\n            $uibModalInstance.dismiss('cancel');\n        };\n\n    }]);"],"sourceRoot":"/source/"}